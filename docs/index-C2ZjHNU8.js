let e1=2025;function t1(n,t){t==null&&(t=n,n=0),e1=e1*16807%2147483647;const e=(e1-1)/2147483646;return Math.floor(e*(t-n+1))+n}function S1(n){for(let t=n.length-1;t>=1;t--){const e=Math.floor(t1(t));[n[t],n[e]]=[n[e],n[t]]}return n}const p1=[],g=32,E1=[[-1,0],[1,0],[0,-1],[0,1]],r1=.3,i1=.15;function c1(){}const k1=60,v1=1/k1,X1=1,Y=window.innerWidth<=440?1.6:3,p={buffer:null,context:null},M={resized:!1,touched:!1,touches:{}},E={width:0,height:0},o1={getPosition(n){return n==null&&(n=Object.keys(M.touches)[0]),M.touches[n]??null},getTouches(){return Object.keys(M.touches)},wasTouched(){return M.touched}};function Y1(){const n=p.buffer;p.context.clearRect(0,0,n.width,n.height)}function I1(n,t,e,s,i){p.context.drawImage(n,0,0,n.width,n.height,Math.floor(t),Math.floor(e),Math.floor(s),Math.floor(i))}function T1(n){return p.context.measureText(n).width}function l1(n,t,e,s){const i=p.context;i.beginPath(),i.moveTo(n,t),i.lineTo(e,s),i.stroke()}function h1(n,t,e,s,i){const o=p.context;s=s??E.width-t;const h=T1(n),a=i==="right"?s-h:i==="center"?.5*(s-h):0;o.fillText(n,Math.floor(t+a),Math.floor(e),s)}function N(n,t,e,s,i,o){const h=p.context;h.beginPath(),h.roundRect(Math.floor(t),Math.floor(e),Math.floor(s),Math.floor(i),o??0),n==="fill"?h.fill():h.stroke()}function z1(){p.context.restore()}function C1(n){p.context.rotate(n*Math.PI/180)}function S(n,t){const e=p.context;e.fillStyle=n,e.strokeStyle=n,e.globalAlpha=t??1}function R1(n){const t=p.context;t.font=t.font.replace(/\d+/,String(n))}function B1(n,t){p.context.translate(Math.floor(n),Math.floor(t))}function D1(){return M.resized}async function O1(n,t,e){f1(),n!=null&&await n();const s=e??c1,i=t??c1,o=w1();p.buffer=o[0],p.context=o[1],document.body?.appendChild(p.buffer),function c(u){const w=u1(),y=w-u;y>=X1?u=w:y>=v1&&(u=w,i(y),G1(),f1(),Y1(),p.context.save(),s(),p.context.restore(),M.resized=!1,M.touched=!1),window.requestAnimationFrame(()=>{c(u)})}(u1()),document.addEventListener("click",h),document.addEventListener("touchstart",a),document.addEventListener("touchmove",a),document.addEventListener("touchend",r),window.addEventListener("resize",l);function h(c){f(c),c.button===0&&(M.touched=!0,M.touches.mouse=[c.pageX/Y,c.pageY/Y])}function a(c){f(c),M.touched=!0;for(let u=0;u<c.changedTouches.length;u++){const w=c.changedTouches[u];M.touches[String(w.identifier)]=[w.pageX/Y,w.pageY/Y]}}function r(c){f(c);for(let u=0;u<c.changedTouches.length;u++){const w=c.changedTouches[u];delete M.touches[String(w.identifier)]}}function l(){M.resized=!0}function f(c){c.preventDefault()}}function F1(n,t,e){const s=[],[i,o]=w1(t,e);for(let h=0;h<n.height;h+=e)for(let a=0;a<n.width;a+=t){o.clearRect(0,0,t,e),o.drawImage(n,-a,-h);const r=new window.Image;r.src=i.toDataURL("image/png"),s.push(r)}return s}function A1(n){return new Promise((t,e)=>{const s=new window.Image;s.onload=()=>t(s),s.onerror=()=>e(new Error(`Failed to load image: '${n}'`)),s.src=n})}function w1(n,t){const e=document.createElement("canvas");n!=null&&t!=null&&(e.width=n,e.height=t);const s=e.getContext("2d");return s.imageSmoothingEnabled=!1,s.font="8px Consolas, monaco, monospace",s.textBaseline="top",[e,s]}function G1(){p.buffer.width=window.innerWidth,p.buffer.height=window.innerHeight,p.context.scale(Y,Y)}function u1(){return .001*Date.now()}function f1(){E.width=Math.ceil(window.innerWidth/Y),E.height=Math.ceil(window.innerHeight/Y)}function N1(n,t,e,s){return e*n/s+t}function L1(n,t,e,s){return n=n/s-1,e*(n*n*n+1)+t}function d1(n,t,e,s){return n=n/s*2,n<1?e/2*n*n*n+t:(n=n-2,e/2*(n*n*n+2)+t)}function I(n,t){if(n==null)throw new Error(t??'Unexpected "null" value');return n}const a1=[],W=new Set,R=[];let $=0;function j1(n){if(R.length!==0){if($+=n,R.forEach(([t,e,s,i,o,h,a,r])=>{const l=Math.min($-o,r);t[e]=i(l,h,a,r),l===r&&W.add(s)}),W.size>0){for(let t=R.length-1;t>=0;--t){const e=R[t];W.has(e[2])&&R.splice(t,1)}W.forEach(t=>I(a1[t])()),W.clear()}R.length===0&&($=0)}}async function K(n,t,e){const s=new Promise(h=>{a1.push(h)}),i=a1.length-1,o=e??N1;return n.forEach(([h,a])=>{Object.keys(a).forEach(r=>{const l=h[r],f=a[r];R.push([h,r,i,o,$,l,f-l,t])})}),s}function U1(n){return new Promise(t=>setTimeout(t,1e3*n))}const W1=(...n)=>_1(m1(...n)),_1=(...n)=>{const t=s1.createBufferSource(),e=s1.createBuffer(n.length,n[0].length,b);return n.map((s,i)=>e.getChannelData(i).set(s)),t.buffer=e,t.connect(s1.destination),t.start(),t},m1=(n=1,t=.05,e=220,s=0,i=0,o=.1,h=0,a=1,r=0,l=0,f=0,c=0,u=0,w=0,y=0,B=0,m=0,D=1,k=0,O=0)=>{const x=2*Math.PI,L=r*=500*x/b**2,j=(y>0?1:-1)*x/4;let F=e*=(1+2*t*Math.random()-t)*x/b;const z=[];let P=0,A=0,d=0,C=1,y1=0,P1=0,v=0,U,G;for(s=99+b*s,k*=b,i*=b,o*=b,m*=b,l*=500*x/b**3,y*=x/b,f*=x/b,c*=b,u=b*u|0,G=s+k+i+o+m|0;d<G;z[d++]=v)++P1%(100*B|0)||(v=h?h>1?h>2?h>3?Math.sin((P%x)**3):Math.max(Math.min(Math.tan(P),1),-1):1-(2*P/x%2+2)%2:1-4*Math.abs(Math.round(P/x)-P/x):Math.sin(P),v=(u?1-O+O*Math.sin(2*Math.PI*d/u):1)*(v>0?1:-1)*Math.abs(v)**a*n*x1*(d<s?d/s:d<s+k?1-(d-s)/k*(1-D):d<s+k+i?D:d<G-m?(G-d-m)/o*D:0),v=m?v/2+(m>d?0:(d<G-m?1:(G-d)/m)*z[d-m|0]/2):v),U=(e+=r+=l)*Math.sin(A*y-j),P+=U-U*w*(1-1e9*(Math.sin(d)+1)%2),A+=U-U*w*(1-1e9*(Math.sin(d)**2+1)%2),C&&++C>c&&(e+=f,F+=f,C=0),!u||++y1%u||(e=F,r=L,C=C||1);return z};let x1=.4;function b1(n){x1=n}const b=22100,s1=new(window.AudioContext||window.webkitAudioContext),V1=(n,t,e,s=125)=>{let i,o,h,a,r,l,f,c,u,w,y,B,m,D,k=0,O=[];const x=[],L=[];let j=0,F=0,z=1;const P={},A=b/s*60>>2;for(;z;j++)O=[z=c=B=0],e.map((d,C)=>{for(f=t[d][j]||[0,0,0],z|=!!t[d][j],D=B+(t[d][0].length-2-!c)*A,m=C==e.length-1,o=2,a=B;o<f.length+m;c=++o){for(r=f[o],u=o==f.length+m-1&&m||w!=(f[0]||0)|r|0,h=0;h<A&&c;h++>A-99&&u?y+=(y<1)/99:0)l=(1-y)*O[k++]/2||0,x[a]=(x[a]||0)-l*F+l,L[a]=(L[a++]||0)+l*F+l;r&&(y=r%1,F=f[1]||0,(r|=0)&&(O=P[[w=f[k=0]||0,r]]=P[[w,r]]||(i=[...n[w]],i[2]*=2**((r-12)/12),r>0?m1(...i):[])))}B=D});return[x,L]},H={buffer:null,current:null},Q={};async function H1(){Q.error=[.6,,30,.01,.04,.06,2,3.8,3,,,,,1.8,,,,.92,.03,,-2186],Q.select=[.8,0,630,.01,.01,.01,1,3.4,.1,,,,,,,,.2,.8,.01,,564],Q.match=[,,18,.01,.01,.03,,2.7,43,,,,,.1,,,,.65,.01,.17,-1423],H.buffer=await Z1([[[,0,,,,,3,0,,,320,,,4],[,0,84,,,,,.7,,,,.5,,6.7,1,.05],[,0,23,,,.2,3,5],[.75,0,386,,,.25,2],[.75,0,386,,,.25,2],[2,0,800,,,.075,2,2,,,1e3,-.01,.02,4.8,-.3,,.065],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[,0,,,,,3,0,,,320,,,4],[.75,0,386,,,.25,2],[.75,0,386,,,.25,2]],[[[3,1,1.08,.16,13.08,.16,13.08,11.08,8.08,11.08,9.08,.16,9.08,8.08,6.08,.16,4.08,.16,8.08,.16,8.08,9.08,8.08,.16,6.08,.16,8.08,9.08,8.08,6.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,15.08,13.08,11.08,8.08,.16,8.08,11.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,18.08,20.08,21.08,20.08,.16,20.08,18.08,16.08,.16,15.08,.16],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8.08,.16,8.08,.16,8.08,.16],[2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22.16,.32,22.16,.32,22.16,.32]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[3,1,1.08,.16,13.08,.16,13.08,11.08,8.08,11.08,9.08,.16,9.08,8.08,6.08,.16,4.08,.16,8.08,.16,8.08,9.08,8.08,.16,6.08,.16,8.08,9.08,8.08,6.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,15.08,13.08,11.08,8.08,.16,8.08,11.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,18.08,20.08,21.08,20.08,.16,20.08,18.08,16.08,.16,15.08,.16],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[7,1,25,20.69,23,25,20.69,27,25.69,28,27.69,25.69,28.69,28,27,28.69,25,27.69,23,25.69,20,23,25.69,25,23.69,23,25.69,23.75,23.75,23,25,23.69,27,25.69,28,28,27,25,28.69,23,25.69,20,23.69,20,20.69,20,23,20.69,25,23.69,28,28,27,25,28.69,28,25.69,27,28.69,25.75,27.75,27,25,27.69,27,25.69],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[7,1,28,27.69,27,25,27.69,23,25.69,25,23.69,25.69,25.69,25,23,25.69,20,23.69,23,20.69,20,23,20.69,25,23.69,23,25.69,23.69,23.69,23,20,23.69,23,20.69,21,23.69,23,21,23.69,18,21.69,20,18.69,20,20.69,20,18,20.69,20,18.69,21,20.69,23,25,20.69,28,25.69,27,28.69,27.75,25.75,27,25,25.69,24,25.69],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[7,1,25.08,.16,.24,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[3,1,,,,,13.08,11.08,8.08,11.08,9.08,.16,9.08,8.08,6.08,.16,4.08,.16,8.08,.16,8.08,9.08,8.08,.16,6.08,.16,8.08,9.08,8.08,6.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,15.08,13.08,11.08,8.08,.16,8.08,11.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,18.08,20.08,21.08,20.08,.16,20.08,18.08,16.08,.16,15.08,.16],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[3,1,13.08,16.08,20.08,16.08,13.08,16.08,20.08,16.08,13.08,16.08,21.08,16.08,13.08,16.08,21.08,16.08,11.08,16.08,20.08,16.08,11.08,16.08,20.08,16.08,11.08,15.08,20.08,15.08,11.08,15.08,20.08,15.08,13.08,16.08,21.08,16.08,13.08,16.08,21.08,16.08,11.08,16.08,20.08,16.08,11.08,16.08,20.08,16.08,13.08,16.08,21.08,16.08,13.08,16.08,21.08,16.08,12.08,15.08,20.08,15.08,12.08,15.08,20.08,15.08],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,.24,.32,.4,.48,.56,.59,9.03,.06,.14,.22,.3,.38,.46,.54,.62,.7,16.08,.16,.24,.32,.4,.43,8.03,.06,.14,.22,.3,.38,.46,.54,9.08,.16,.24,.32,.4,.48,.56,.59,16.03,.06,.14,.22,.3,.38,.46,.54,.62,.7,9.08,.16,.24,.32,.4,.43,8.03,.06,.14,.22,.3,.38,.46,.54],[3,1,11,.08,13.08,.16,13.08,.16,11.08,.16,9.08,.16,9.08,.16,9.08,.16,.24,.32,6,.08,9.08,.16,8.08,.16,6.08,.16,8.08,.16,9.08,.16,8.08,.16,.24,.32,7,.08,9.08,.16,11.08,.16,9.08,.16,8.08,.16,8.08,.16,6.08,.16,8.08,.16,9.08,.16,9.08,.16,11.08,.16,9.08,.16,8,,,,,,,,],[6,-1,25.11,,,,,,,,25.11,,,,,,,,,,25.11,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,,,25.11,,,,,,25.11,,,,,,,,],[1,1,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,20.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,25.11,20.11,16.11,13.11,,13.11,16.11,21.11,25.11,21.11,16.11,13.11,11.11,16.11,,20.11,23.11,20.11,16.11,11.11,,11.11,15.11,20.11,23.11,20.11,15.11,11.11,,13.11,16.11,21.11,25.11,21.11,16.11,13.11,,11.11,16.11,20.11,23.11,20.11,16.11,11.11,13.11,16.11,,21.11,25.11,21.11,16.11,13.11,,12.11,15.11,20.11,24.11,20.11,15.11,12.11],[2,1,,,,,,,,,23.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,23.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,23.16,.32,.48,.64,.8,.96,22.16,.32,.48,.64,.8,.96,,,],[5,1,,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,]],[[4,-1,13.08,.16,.24,.32,.4,.48,.56,.59,9.03,.06,.14,.22,.3,.38,.46,.54,.62,.7,16.08,.16,.24,.32,.4,.43,8.03,.06,.14,.22,.3,.38,.46,.54,9.08,.16,.24,.32,.4,.48,.56,.59,16.03,.06,.14,.22,.3,.38,.46,.54,.62,.7,9.08,.16,.24,.32,.4,.43,8.03,.06,.14,.17,8.03,.06,.09,.12],[3,1,11,.08,13.08,.16,13.08,.16,11.08,.16,9.08,.16,9.08,.16,9.08,.16,.24,.32,6,.08,9.08,.16,8.08,.16,6.08,.16,8.08,.16,9.08,.16,8.08,.16,.24,.32,7,.08,9.08,.16,11.08,.16,9.08,.16,8.08,.16,8.08,.16,6.08,.16,8.08,.16,9.08,.16,9.08,.16,11.08,.16,9.08,.16,8,,,,,,,,],[6,-1,25.11,,,,,,,,25.11,,,,,,,,,,25.11,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,,,25.11,,,,,,25.11,,,,25.11,,,,],[1,1,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,20.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,25.11,20.11,16.11,13.11,,13.11,16.11,21.11,25.11,21.11,16.11,13.11,11.11,16.11,,20.11,23.11,20.11,16.11,11.11,,11.11,15.11,20.11,23.11,20.11,15.11,11.11,,13.11,16.11,21.11,25.11,21.11,16.11,13.11,,11.11,16.11,20.11,23.11,20.11,16.11,11.11,13.11,16.11,,21.11,25.11,21.11,16.11,13.11,,12.11,15.11,20.11,,20.11,15.11,12.11],[2,1,,,,,,,,,23.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,23.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,23.16,.32,.48,.64,.8,.96,22.16,.32,.48,.64,22.16,.32,.48,.64],[5,1,,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,25.16,.32,.48,.64,.8,.96,,,,,,,,,,,,,,,,,,,]],[[4,-1,8.03,.06,.09,.12,8.03,.06,.09,.12,18,.08,21.08,.16,20.08,.16,18.08,.16,20.08,.16,18.08,.16,16.08,.16,15.08,,],[6,-1,25.11,,,,25.11,,,,25.11,,,,25.11,,,,25.11,25.11,,,25.11,,25.11,25.11],[2,1,22.16,.32,.48,.64,22.16,.32,.48,.64,34.16,.32,.48,.64,34.16,.32,.48,.64,34.16,.32,.48,.64,34.16,.32,.48,.64],[9,-1,,12.11,15.11,20.11,,20.11,15.11,12.11,,15.11,20.11,24.11,,24.11,20.11,15.11,,,,,,,,,],[5,-1,,,,,,,,,,,,,,,,,,,25,25,,25,,,]],[[4,-1,13.08,.16,13.08,13.08,25.08,20.08,11.08,9.03,.06,.09,9.08,9.08,21.08,7.08,9.08,13.08,16.08,.16,16.08,16.08,16.08,28.08,11.08,8.03,.06,.09,8.08,8.08,20.08,15.08,18.08,15.08,9.08,.16,9.08,9.08,21.08,9.08,21.08,16.03,.06,.09,16.08,16.08,28.08,16.08,28.08,.16,9.08,.16,9.08,9.08,21.08,9.08,21.08,8.03,.06,.09,8.08,8.08,20.08,18.08,16.08,15.08],[3,1,1.08,.16,13.08,.16,13.08,11.08,8.08,11.08,9.08,.16,9.08,8.08,6.08,.16,4.08,.16,8.08,.16,8.08,9.08,8.08,.16,6.08,.16,8.08,9.08,8.08,6.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,15.08,13.08,11.08,8.08,.16,8.08,11.08,8.08,.16,8.08,11.08,13.08,.16,13.08,15.08,16.08,18.08,20.08,21.08,20.08,.16,20.08,18.08,16.08,.16,15.08,,],[5,-1,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,,,,,,,25,,,,,,,25,25,,25,25,,25,,,],[1,1,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,20.16,,20.16,.32,20.16,20.16,.32,20.16,.32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[9,-1,,13.11,16.11,20.11,,20.11,16.11,,,13.11,16.11,21.11,,21.11,16.11,13.11,,11.11,16.11,20.11,,20.11,16.11,,,11.11,15.11,20.11,,20.11,15.11,,,13.11,16.11,21.11,,21.11,16.11,,,11.11,16.11,20.11,,20.11,16.11,11.11,,13.11,16.11,21.11,,21.11,16.11,,,,,,,,,,],[6,-1,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,25.11,,,,,25.11,,,,,,,,25.11,,,,,,,,25.11,,,,,25.11,,,25.11,,25.11,25.11],[2,1,,,,,,,,23.16,,23.16,.32,23.16,23.16,.32,23.16,.32,,,,,,,,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,,,,,,,,,,23.16,.32,23.16,.32,23.16,23.16,.32,22.16,,22.16,.32,22.16,22.16,.32,22.16,.32],[8,1,,,,,,,,,13,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,16,,,,,,,,,,,,,,,,15,,,,,,,,],[,1,,,,,,,,,,,,,,,,,25.16,.32,25.16,.32,25.16,25.16,.32,,,,,,,,,,,,,,,,,25.16,,25.16,.32,25.16,25.16,.32,25.16,.32,,,,,,,,,,,,,,,,,]]],[0,1,1,2,3,4,1,2,3,4,1,5,5,6,7,8,9],80,{title:"",instruments:["* mark knight *","ex t.d.k. in 1999!!!",'called "knockerboys"',"travellers.","mark knight","22 overhill gardens","patcham, brighton","44 0 1273 557113","mknightea.com","flit kills moths"]}])}function Z(n){const t=I(Q[n]);b1(1),W1(...t)}function J1(){H.current==null&&(b1(.4),H.current=_1(...H.buffer),H.current.loop=!0)}function Z1(n){return new Promise(t=>{setTimeout(()=>t(V1(...n)),20)})}class T{enter(t){}exit(){}render(){}update(t){}}const q=.2*g,X=.8*g,_=1.5*g,V=2*g,$1=[q,X,_],K1=[[X+1,q+4,X+4,q+3],[X+3,X-4,X+7,X-4],[_+1,_-6,_+4,_-7],[_,_-4,_+6,_-4],[_+8,_-3,_+16,_-3],[q,_+14,X,_+14]];class Q1 extends T{render(){const{width:t,height:e}=E;S("#e8ad90"),N("fill",0,0,t,e);for(let s=0;s<t+V;s+=V)for(let i=0;i<e+V;i+=V)this._drawPattern(s,i)}_drawPattern(t,e){S("#8f5f4f"),$1.forEach(s=>{l1(t,e+s,V,e+s)}),S("#f4bba0"),K1.forEach(s=>l1(t+s[0],e+s[1],t+s[2],e+s[3]))}}const n1="No piece found";class q1 extends T{constructor(){super(),this.pageX=0,this.pageY=0,this.width=0,this.height=0}}class M1 extends q1{constructor(){super(),this.angle=0,this.clientX=0,this.clientY=0}render(){this.angle!==0&&(B1(-this.clientX,-this.clientY),C1(this.angle))}update(t){const e=this.angle;this.clientX=e!==0?-(this.pageX+.5*this.width):0,this.clientY=e!==0?-(this.pageY+.5*this.height):0}}class t0 extends M1{constructor(t,e,s){super(),this.id=s,this.offsetX=0,this.offsetY=0,this.x=t,this.y=e,this.width=g,this.height=g,this._updateOffset()}render(){const t=this.clientX+this.pageX+this.offsetX,e=this.clientY+this.pageY+this.offsetY;S("#EACD95"),N("fill",t+1,e+1,this.width-2,this.height-2,2),S("#FEE7BC"),N("line",t+1,e+1,this.width-2,this.height-2,2),I1(p1[this.id],t,e,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,id:this.id}}_updateOffset(){this.offsetX=this.x*this.width,this.offsetY=this.y*this.height}}class e0 extends T{constructor(){super(),this.target=null}render(){const t=this.target;t!=null&&(S("#E7040F"),N("line",t.clientX+t.pageX+t.x*t.width,t.clientY+t.pageY+t.y*t.height,t.width,t.height,2))}}class s0 extends M1{constructor(t,e,s,i){super(),this.expectedIDs=s??3,this.expectedMoves=i??2,this.columns=t??6,this.rows=e??5,this.table=[],this.selection=new e0,this._updateDimentions(),this._updatePagePosition()}render(){const t=D1();t&&this._updatePagePosition(),super.render();const e=this.clientX+this.pageX,s=this.clientY+this.pageY,i=this.columns*g,o=this.rows*g;S("#BE8353"),N("fill",e,s,i,o,2),this.table.forEach(h=>h.forEach(a=>{a!=null&&(a.clientX=this.clientX,a.clientY=this.clientY,a.render(),t&&(a.pageX=this.pageX,a.pageY=this.pageY))})),this.selection.render(),z1()}update(t){super.update(t),this.selection.update(t)}toJSON(){return this.table.map(t=>t.map(e=>e?.id??null))}_genBoard(){const t=this.table;t.length=0;for(let e=0;e<this.rows;++e){t.push([]);for(let s=0;s<this.columns;++s)t[e].push(this._genPiece(s,e))}for(;this._getMatches().length>0||!this._hasMoves();)this._genBoard()}_genPiece(t,e){const s=new t0(t,e,t1(this.expectedIDs));return s.pageX=this.pageX,s.pageY=this.pageY,s}_getPiece(t,e,s){const i=s===0?t:e,o=s===0?e:t;return i<0||i>=this.columns||o<0||o>=this.rows?null:this.table[o][i]}_hasPiece(t,e){return this._getPiece(t,e,0)!=null}_removePieces(t){t.forEach(e=>{this.table[e.y][e.x]=null})}_clearSelection(){this.selection.target=null}_getSelection(){return this.selection.target}_updateSelection(t,e){this.selection.target=this._getPiece(t,e,0)}_getFallingPieces(){const t=this.table,e=Array(this.rows+1).fill(null);for(let s=0;s<this.columns;++s){let i=0;for(let o=this.rows-1;o>=0;--o){const h=this._getPiece(s,o,0);h==null?i++:i>0&&(h.y+=i,t[o+i][s]=h,t[o][s]=null,e[i]==null&&(e[i]=[]),e[i].push(h))}for(let o=0;o<i;++o){const h=this._genPiece(s,o);h.offsetY-=i*g,t[h.y][h.x]=h,e[i]==null&&(e[i]=[]),e[i].push(h)}}return e}_getMatches(){const t=[];for(let e=0;e<2;++e){const s=e===0?this.rows:this.columns,i=e===0?this.columns:this.rows;for(let o=0;o<s;++o){let h=1,a=this._getPiece(0,o,e)?.id;for(let r=1;r<i;++r){const l=this._getPiece(r,o,e);l?.id===a?h++:(h=1,a=l?.id),h===3&&(t.push(I(this._getPiece(r-2,o,e),n1)),t.push(I(this._getPiece(r-1,o,e),n1))),h>=3&&t.push(I(l,n1))}}}return t}_hasMoves(){let t=0;for(let e=0;e<this.rows;++e){let s=this._getPiece(0,e,0)?.id;for(let i=1;i<this.columns;++i){const o=this._getPiece(i,e,0);if(o?.id===s){if((this._hasSiblingPieces(i-2,e,o.id)||this._hasSiblingPieces(i+1,e,o.id))&&t++,t===this.expectedMoves)return!0}else s=o?.id}}return!1}_hasSiblingPieces(t,e,s){let i=0;return E1.forEach(o=>{this._getPiece(o[0],o[1],0)?.id===s&&i++}),i>1}_toVirtualCoords(t){if(t==null)return null;const e=Math.min(Math.floor(Math.max(t[0]-this.pageX,0)/g),this.columns),s=Math.min(Math.floor(Math.max(t[1]-this.pageY,0)/g),this.rows);return[e,s]}_transpose(){const t=(this.angle+360)%360;if(t===0)return;const e=t===180?this.rows:this.columns,s=t===180?this.columns:this.rows,i=Array(e).fill(0).map(()=>Array(s).fill(null));this.table.forEach((o,h)=>o.forEach((a,r)=>{const l=this._transposeX(r,h,t),f=this._transposeY(r,h,t);i[f][l]=a,a!=null&&(a.x=l,a.y=f)})),this.table.length=0,this.table=i,this.columns=s,this.rows=e,this._updateDimentions(),this._updatePagePosition(),i.forEach(o=>o.forEach(h=>{h!=null&&(h.pageX=this.pageX,h.pageY=this.pageY,h._updateOffset())})),this.angle=0}_transposeX(t,e,s){switch(s){case 90:return this.rows-e-1;case 180:return this.columns-t-1;case 270:return e;default:return t}}_transposeY(t,e,s){switch(s){case 90:return t;case 180:return this.rows-e-1;case 270:return this.columns-t-1;default:return e}}_updateDimentions(){this.width=this.columns*g,this.height=this.rows*g}_updatePagePosition(){this.pageX=.5*(E.width-this.width),this.pageY=.5*(E.height-this.height)}}class n0 extends T{constructor(){super(),this.rotation=0,this.scores=0,this._updateMoves(0)}render(){S("#fff"),h1(String(this.scores).padStart(7,"0"),5,16,E.width-10,"right"),h1(`↺${this.rotation-this.moves}`,5,30,E.width-10,"right")}_updateMatches(t){this.scores+=Math.floor(10*t/3)}_updateMoves(t){this.moves=t}_updateRotation(t){for(let e=this.moves+1;e<this.moves+10;++e)if(e%t===0){this.rotation=e;break}}}const g1=S1([-270,-180,-90,90,180,270]);class i0 extends T{enter(){this.cursor=[-1,-1],this.interactive=!0,this.moves=0,this.showInfo=!1,this.stepsBeforeRotation=t1(4,5),this.totalMatches=0,this.bg=new Q1,this.board=new s0,this.board._genBoard(),this.info=new n0,this.info._updateRotation(this.stepsBeforeRotation)}render(){this.bg.render(),this.board.render(),this.showInfo&&this.info.render()}update(t){if(this.board.update(t),this.showInfo||(this.showInfo=!0),this.interactive&&o1.wasTouched()){const e=this.board._toVirtualCoords(o1.getPosition());e!=null&&(this.cursor[0]=e[0],this.cursor[1]=e[1],this._handleInput())}}_canMove(t){const e=I(this.board._getSelection()),s=this.board.table;s[t.y][t.x]=e,s[e.y][e.x]=t;const i=this.board._getMatches();return s[t.y][t.x]=t,s[e.y][e.x]=e,i.length>0}async _handleInput(){const t=this.board,e=t._getSelection();if(e!=null){const s=e.x-this.cursor[0],i=e.y-this.cursor[1];if(s===0&&i===0){t._clearSelection();return}const o=Math.abs(s)+Math.abs(i)===1,h=t._getPiece(this.cursor[0],this.cursor[1],0);if(h!=null)if(o&&this._canMove(h)){if(Z("select"),this.interactive=!1,this.moves++,this.info._updateMoves(this.moves),await this._swapPieces(h),await this._updateBoard(),this.moves%this.stepsBeforeRotation===0){this.stepsBeforeRotation=t1(4,5),this.info._updateRotation(this.stepsBeforeRotation);const a=I(g1.shift());g1.push(a),await this._rotateBoard(a)}this.interactive=!0}else Z("error"),t.selection.target=h}else t._updateSelection(this.cursor[0],this.cursor[1]),t._hasPiece(this.cursor[0],this.cursor[1])&&Z("select")}async _rotateBoard(t){const e=2*Math.floor(Math.abs(t/90));await K([[this.board,{angle:t}]],e*r1,d1),this.board._transpose()}async _swapPieces(t){const e=I(this.board._getSelection()),s=this.board.table;s[t.y][t.x]=e,s[e.y][e.x]=t;const i=t.x,o=t.y;t.x=e.x,t.y=e.y,e.x=i,e.y=o,this.board._updateSelection(-1,-1),await K([[e,{offsetX:e.x*g,offsetY:e.y*g}],[t,{offsetX:t.x*g,offsetY:t.y*g}]],r1,d1)}async _updateBoard(){let t=this.board._getMatches();for(;t.length>0;)this.board._removePieces(t),Z("match"),await U1(.5*i1),this.info._updateMatches(t.length),this.totalMatches+=t.length,await this.board._getFallingPieces().reduce((s,i,o)=>i==null?s:K(i.map(h=>[h,{offsetY:h.y*g}]),o*i1*2),null),t=this.board._getMatches()}}class o0 extends T{constructor(){super(),this.opacity=.5}render(){const{width:t,height:e}=E;S("#000",this.opacity),N("fill",0,0,t,e),S("#edf2f4"),R1(42),h1("Cats Puzzle",0,.5*e,null,"center")}update(){o1.wasTouched()&&(J1(),this._startGame())}async _startGame(){await K([[this,{opacity:0}]],i1,L1),J.pop()}}class h0 extends T{constructor(t){super(),this.current=new T,this.states=t}change(t,e){return this.current.exit(),this.current=this.states[t](),this.current.enter(e),this}render(){this.current.render()}update(t){this.current.update(t)}}class a0{constructor(){this.stack=[]}pop(){this.stack[this.stack.length-1].exit(),this.stack.pop()}push(t){t.enter(),this.stack.push(t)}render(){this.stack.forEach(t=>t.render())}update(t){this.stack[this.stack.length-1].update(t)}}const J=new a0;function r0(){J.push(new h0({play:()=>new i0}).change("play")),J.push(new o0)}async function c0(){p1.push(...F1(await A1("./pieces.webp"),2*g,2*g)),r0(),await H1()}function l0(n){j1(n),J.update(n)}function u0(){J.render()}O1(c0,l0,u0);
